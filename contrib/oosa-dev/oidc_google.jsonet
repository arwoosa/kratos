local claims = std.extVar('claims');

if std.length(claims.sub) == 0 then
  error 'claim sub not set'
else
  {
    identity: {
      traits: {
        username: claims.sub,
        email: claims.email,
        name: claims.given_name + " " + claims.family_name,
        picture: claims.picture
      },
    },
  }
